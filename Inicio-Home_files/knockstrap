!function(n,t){"use strict";"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?t(require("knockout"),require("jquery")):"function"==typeof define&&define.amd?define(n,["knockout","jquery"],t):t(ko,$)}("knockstrap",function(n,t){"use strict";n.utils.uniqueId=function(){var n={"ks-unique-":0};return function(t){return t=t||"ks-unique-",n[t]||(n[t]=0),t+n[t]++}}();n.utils.unwrapProperties=function(t){if(null===t||"object"!=typeof t)return t;var i={};return n.utils.objectForEach(t,function(t,r){i[t]=n.unwrap(r)}),i},function(){var t={};t.alert='<div class="alert fade in" data-bind="css: type, template: innerTemplate"> <\/div>';t.alertInner='<button class="close" data-dismiss="alert" aria-hidden="true">&times;<\/button> <p data-bind="text: message"><\/p>';t.carousel='<!-- ko template: indicatorsTemplate --> <!-- /ko --> <div class="carousel-inner"> <!-- ko foreach: items --> <div class="item" data-bind="with: $parent.converter($data), css: { active: $index() == 0 }"> <img data-bind="attr: { src: src, alt: alt }"> <div class="container"> <div class="carousel-caption"> <!-- ko template: { name: $parents[1].itemTemplateName, data: $data, templateEngine: $parents[1].templateEngine, afterRender: $parents[1].afterRender, afterAdd: $parents[1].afterAdd, beforeRemove: $parents[1].beforeRemove } --> <!-- /ko --> <\/div> <\/div> <\/div> <!-- /ko --> <\/div> <!-- ko template: controlsTemplate --> <!-- /ko --> ';t.carouselContent='<div data-bind="text: content"><\/div>';t.carouselControls='<a class="left carousel-control" data-bind="attr: { href: id }" data-slide="prev"> <span class="icon-prev"><\/span> <\/a> <a class="right carousel-control" data-bind="attr: { href: id }" data-slide="next"> <span class="icon-next"><\/span> <\/a>';t.carouselIndicators='<ol class="carousel-indicators" data-bind="foreach: items"> <li data-bind="attr: { \'data-target\': $parent.id, \'data-slide-to\': $index }"><\/li> <\/ol> ';t.modal='<div class="modal-dialog" data-bind="css: dialogCss"> <div class="modal-content"> <div class="modal-header" data-bind="template: headerTemplate"> <\/div> <div class="modal-body" data-bind="template: bodyTemplate"> <\/div> <!-- ko if: footerTemplate --> <div class="modal-footer" data-bind="template: footerTemplate"> <\/div> <!-- /ko --> <\/div> <\/div>';t.modalBody='<div data-bind="html: content"> <\/div>';t.modalFooter='<!-- ko if: $data.action --> <a href="#" class="btn btn-primary" data-bind="click: action, html: primaryLabel"><\/a> <!-- /ko --> <a href="#" class="btn btn-light" data-bind="html: closeLabel" data-dismiss="modal"><\/a>';t.modalHeader='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;<\/button> <h3 data-bind="text: label"><\/h3> ';t.progress='<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" data-bind="style: { width: barWidth }, attr: { \'aria-valuenow\': value }, css: innerCss"> <span data-bind="css: { \'sr-only\': textHidden }"> <span data-bind="text: value"><\/span>% <span data-bind="text: text"><\/span> <\/span> <\/div> ';n.templateSources.stringTemplate=function(n){this.templateName=n;this.data=function(n,i){return t.data=t.data||{},t.data[this.templateName]=t.data[this.templateName]||{},1===arguments.length?t.data[this.templateName][n]:(t.data[this.templateName][n]=i,void 0)};this.text=function(n){return 0===arguments.length?t[this.templateName]:(t[this.templateName]=n,void 0)}};n.stringTemplateEngine=function(){this.allowTemplateRewriting=!1};n.stringTemplateEngine.prototype=new n.nativeTemplateEngine;n.stringTemplateEngine.prototype.constructor=n.stringTemplateEngine;n.stringTemplateEngine.prototype.makeTemplateSource=function(t){return new n.templateSources.stringTemplate(t)};n.stringTemplateEngine.prototype.getTemplate=function(n){return t[n]};n.stringTemplateEngine.prototype.addTemplate=function(n,i){if(arguments.length<2)throw new Error("template is not provided");t[n]=i};n.stringTemplateEngine.prototype.removeTemplate=function(n){if(!n)throw new Error("template name is not provided");delete t[n]};n.stringTemplateEngine.prototype.isTemplateExist=function(n){return!!t[n]};n.stringTemplateEngine.instance=new n.stringTemplateEngine}();n.bindingHandlers.alert={init:function(){return{controlsDescendantBindings:!0}},update:function(i,r,u,f,e){var s,h,a=t(i),o=r(),c=o.template?null:n.stringTemplateEngine.instance,l=n.unwrap(o.template)||"alertInner";if(i.nodeType===(Node.ELEMENT_NODE||1))s=l,h=o.data||{message:o.message},a.addClass("alert fade in").addClass("alert-"+(n.unwrap(o.type)||"info"));else{if(i.nodeType!==(Node.COMMENT_NODE||8))throw new Error("alert binding should be used with dom elements or ko virtual elements");s="alert";h={innerTemplate:{name:l,data:o.data||{message:o.message},templateEngine:c},type:"alert-"+(n.unwrap(o.type)||"info")}}n.renderTemplate(s,e.createChildContext(h),n.utils.extend({templateEngine:c},o.templateOptions),i)}};n.virtualElements.allowedBindings.alert=!0;n.bindingHandlers.carousel={defaults:{css:"carousel slide",controlsTemplate:{name:"carouselControls",templateEngine:n.stringTemplateEngine.instance,dataConverter:function(t){return{id:n.computed(function(){return"#"+n.unwrap(t.id)})}}},indicatorsTemplate:{name:"carouselIndicators",templateEngine:n.stringTemplateEngine.instance,dataConverter:function(t){return{id:n.computed(function(){return"#"+n.unwrap(t.id)}),items:t.content.data}}},itemTemplate:{name:"carouselContent",templateEngine:n.stringTemplateEngine.instance,converter:function(n){return n}}},init:function(i,r,u,f,e){var l=t(i),o=r(),s=n.bindingHandlers.carousel.defaults,h=function(n,i){var r={name:n.name,data:o[i]&&(o[i].data||o[i].dataConverter&&o[i].dataConverter(o))||n.dataConverter(o)};return r=t.extend(!0,{},r,o[i]),o[i]&&o[i].name||(r.templateEngine=n.templateEngine),r},c;if(!o.content)throw new Error("content option is required for carousel binding");return i.id?o.id=i.id:i.id=o.id?n.unwrap(o.id):o.id=n.utils.uniqueId("ks-carousel-"),c={id:o.id,controlsTemplate:h(s.controlsTemplate,"controls"),indicatorsTemplate:h(s.indicatorsTemplate,"indicators"),items:o.content.data,converter:o.content.converter||s.itemTemplate.converter,itemTemplateName:o.content.name||s.itemTemplate.name,templateEngine:o.content.name?null:s.itemTemplate.templateEngine,afterRender:o.content.afterRender,afterAdd:o.content.afterAdd,beforeRemove:o.content.beforeRemove},n.renderTemplate("carousel",e.createChildContext(c),{templateEngine:n.stringTemplateEngine.instance},i),l.addClass(s.css),{controlsDescendantBindings:!0}},update:function(i,r){var u=r(),f=n.unwrap(u.options);t(i).carousel(f)}};n.bindingHandlers.checkbox={init:function(i,r){var u=t(i),f=function(i){setTimeout(function(){var o=t(i.target),u=r(),s=o.val(),e=o.parent().hasClass("active"),f;n.unwrap(u)instanceof Array?(f=n.unwrap(u).indexOf(s),e&&-1===f?u.push(s):e||-1===f||u.splice(f,1)):u(e)},0)};if("buttons"===u.attr("data-toggle")&&u.find("input:checkbox").length){if(!(n.unwrap(r())instanceof Array))throw new Error("checkbox binding should be used only with array or observableArray values in this case");u.on("change","input:checkbox",f)}else{if("checkbox"!==u.attr("type"))throw new Error("checkbox binding should be used only with bootstrap checkboxes");if(!n.isObservable(r()))throw new Error("checkbox binding should be used only with observable values in this case");u.on("change",f)}},update:function(i,r){var u,f=t(i),e=n.unwrap(r());e instanceof Array?"buttons"===f.attr("data-toggle")?f.find("input:checkbox").each(function(n,i){u=-1!==e.indexOf(i.value);t(i).parent().toggleClass("active",u);i.checked=u}):(u=-1!==e.indexOf(f.val()),f.toggleClass("active",u),f.find("input").prop("checked",u)):(u=!!e,f.prop("checked",u),f.parent().toggleClass("active",u))}};n.bindingHandlers.modal={defaults:{css:"modal fade",dialogCss:"",attributes:{role:"dialog"},headerTemplate:{name:"modalHeader",templateEngine:n.stringTemplateEngine.instance},bodyTemplate:{name:"modalBody",templateEngine:n.stringTemplateEngine.instance},footerTemplate:{name:"modalFooter",templateEngine:n.stringTemplateEngine.instance,data:{closeLabel:"Close",primaryLabel:"Ok"}}},init:function(i,r,u,f,e){var s=t(i),o=r(),h=n.bindingHandlers.modal.defaults,c=n.utils.extend({show:s.data().show||!1},n.utils.unwrapProperties(o.options)),l=function(n,i){var r={name:n.name,data:n.data};return r=t.extend(!0,{},r,i),i&&i.name||(r.templateEngine=n.templateEngine),r},a;if(!o.header||!o.body)throw new Error("header and body options are required for modal binding.");return(c.keyboard||"undefined"==typeof c.keyboard)&&s.attr("tabindex",-1),a={dialogCss:o.dialogCss||h.dialogCss,headerTemplate:l(h.headerTemplate,n.unwrap(o.header)),bodyTemplate:l(h.bodyTemplate,n.unwrap(o.body)),footerTemplate:o.footer?l(h.footerTemplate,n.unwrap(o.footer)):null},n.renderTemplate("modal",e.createChildContext(a),{templateEngine:n.stringTemplateEngine.instance},i),s.addClass(h.css).attr(h.attributes),s.modal(c),s.on("shown.bs.modal",function(){"undefined"==typeof o.visible||"function"!=typeof o.visible||n.isComputed(o.visible)||o.visible(!0);t(this).find("[autofocus]:first").focus()}),"undefined"==typeof o.visible||"function"!=typeof o.visible||n.isComputed(o.visible)||(s.on("hidden.bs.modal",function(){o.visible(!1)}),c.show&&o.visible(!0)),{controlsDescendantBindings:!0}},update:function(i,r){var u=r();"undefined"!=typeof u.visible&&t(i).modal(n.unwrap(u.visible)?"show":"hide")}};var i="__popoverTemplateKey__";n.bindingHandlers.popover={init:function(i){var r=t(i);n.utils.domNodeDisposal.addDisposeCallback(i,function(){r.data("bs.popover")&&r.popover("destroy")})},update:function(r,u,f,e,o){var c=t(r),s=n.unwrap(u()),h=(s.options||s.template?n.utils.unwrapProperties(s.options):n.utils.unwrapProperties(s))||{},a;if(s.template){n.unwrap(s.template);var l=n.utils.domData.get(r,i),y=n.unwrap(s.data),v=function(){n.renderTemplate(n.unwrap(s.template),o.createChildContext(y),s.templateOptions,document.getElementById(l));var r=t("#"+l).parents(".popover"),i=c.data("bs.popover"),u=i.getCalculatedOffset(h.placement||"right",i.getPosition(),r.outerWidth(),r.outerHeight());i.applyPlacement(u,h.placement||"right")};l||(l=n.utils.uniqueId("ks-popover-"),n.utils.domData.set(r,i,l),c.on("shown.bs.popover",v));h.content='<div id="'+l+'" ><\/div>';h.html=!0;t("#"+l).is(":visible")&&v()}a=c.data("bs.popover");a?n.utils.extend(a.options,h):(c.popover(h),c.on("shown.bs.popover",function(){(h.container?t(h.container):c.parent()).one("click",'[data-dismiss="popover"]',function(){c.popover("hide")})}))}};n.bindingHandlers.progress={defaults:{css:"progress",text:"",textHidden:!0,striped:!1,type:"",animated:!1},init:function(i,r){var s=t(i),e=r(),u=n.unwrap(e),o=n.bindingHandlers.progress.defaults,f=t.extend({},o,u);if("number"==typeof u)f.value=e,f.barWidth=n.computed(function(){return n.unwrap(e)+"%"});else{if("number"!=typeof n.unwrap(u.value))throw new Error('progress binding can accept only numbers or objects with "value" number propertie');f.barWidth=n.computed(function(){return n.unwrap(u.value)+"%"})}return f.innerCss=n.computed(function(){var t=n.utils.unwrapProperties(u),i="";return t.animated&&(i+="active "),t.striped&&(i+="progress-bar-striped "),t.type&&(i+="progress-bar-"+t.type),i}),n.renderTemplate("progress",f,{templateEngine:n.stringTemplateEngine.instance},i),s.addClass(o.css),{controlsDescendantBindings:!0}}};n.bindingHandlers.radio={init:function(i,r){if(!n.isObservable(r()))throw new Error("radio binding should be used only with observable values");t(i).on("change","input:radio",function(n){setTimeout(function(){var i=t(n.target),u=r(),f=i.val();u(f)},0)})},update:function(i,r){var u,f=t(i).find('input[value="'+n.unwrap(r())+'"]');f.length?(u=f.parent(),u.siblings().removeClass("active"),u.addClass("active"),f.prop("checked",!0)):(u=t(i).find(".active"),u.removeClass("active"),u.find("input").prop("checked",!1))}};n.bindingHandlers.toggle={init:function(i,r){var u=r();if(!n.isObservable(u))throw new Error("toggle binding should be used only with observable values");t(i).on("click",function(t){t.preventDefault();var i=n.unwrap(u);u(!i)})},update:function(t,i){n.utils.toggleDomNodeCssClass(t,"active",n.unwrap(i()))}};n.bindingHandlers.tooltip={init:function(i){var r=t(i);n.utils.domNodeDisposal.addDisposeCallback(i,function(){r.data("bs.tooltip")&&r.tooltip("destroy")})},update:function(i,r){var u=t(i),o=n.unwrap(r()),f=n.utils.unwrapProperties(o),e=u.data("bs.tooltip");e?n.utils.extend(e.options,f):u.tooltip(f)}}}),function(n,t){n.bindingHandlers.modal={init:function(i,r){t(i).modal({show:!1});var u=r();if(n.isObservable(u))t(i).on("hidden.bs.modal",function(){u(!1)})},update:function(i,r){var u=r();n.utils.unwrapObservable(u)?t(i).modal("show"):t(i).modal("hide")}}}(ko,jQuery)